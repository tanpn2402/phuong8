{"version":3,"sources":["index.js"],"names":["URL","window","apiURL","getUrlParam","p","location","search","split","params","map","e","App","state","zoom","this","refs","container","style","opacity","print","searchParams","data","payload","isArray","document","getElementById","value","fetch","method","headers","body","JSON","stringify","id","photo","src","then","json","ok","alert","Object","keys","key","err","file","target","files","reader","FileReader","onload","base64","result","readAsDataURL","setState","className","ref","type","onChange","onfileChange","flex","onClick","onZoomIn","onZoomOut","onSave","onPrint","React","Component","ReactDOM","render"],"mappings":"8LAKMA,EAAMC,OAAOC,QAAU,yBAEvBC,EAAc,WAChB,IACIC,EADeH,OAAOI,SAASC,OACdC,MAAM,KACvBC,EAAS,GAOb,OANAJ,EAAEK,KAAI,SAAAC,GACEA,IACAF,EAAOE,EAAEH,MAAM,KAAK,IAAMG,EAAEH,MAAM,KAAK,OAIxCC,GAGLG,E,2MACFC,MAAQ,CACJC,KAAM,K,yEAINC,KAAKC,KAAKC,UAAUC,MAAMC,QAAU,IACpCjB,OAAOkB,QACPL,KAAKC,KAAKC,UAAUC,MAAMC,QAAU,M,+BAIpC,IAAME,EAAejB,IAEjBkB,EAAO,GACPpB,OAAOqB,SAAWC,kBAAQtB,OAAOqB,UACjCrB,OAAOqB,QAAQb,KAAI,SAAAC,GACfW,EAAKX,GAAKc,SAASC,eAAef,GAAGgB,SAI7CC,MAAM3B,EAAM,qBAAsB,CAC9B4B,OAAQ,OACRC,QAAS,CACL,eAAgB,mCAEpBC,KAAMC,KAAKC,UAAU,CACjBC,GAAIb,EAAaa,GACjBZ,KAAMU,KAAKC,UAAUX,GACrBa,MAAOV,SAASC,eAAe,SAASU,KAAO,OAGlDC,MAAK,SAAA1B,GAAC,OAAIA,EAAE2B,UACZD,MAAK,SAAA1B,GACW,IAATA,EAAE4B,GACFC,MAAM,6BAGNA,MAAM,mE,0CAMlB,IAAMnB,EAAejB,IAErBwB,MAAM3B,EAAM,oBAAqB,CAC7B4B,OAAQ,OACRC,QAAS,CACL,eAAgB,mCAEpBC,KAAMC,KAAKC,UAAU,CACjBC,GAAIb,EAAaa,OAGpBG,MAAK,SAAA1B,GAAC,OAAIA,EAAE2B,UACZD,MAAK,SAAA1B,GACF,IAAIW,EAAOX,EAAEW,KACTA,GACAmB,OAAOC,KAAKpB,GAAMZ,KAAI,SAAAiC,GAClB,IACIlB,SAASC,eAAeiB,GAAKhB,MAAQL,EAAKqB,GAC5C,MAAOC,QAIbjC,EAAEwB,QACFV,SAASC,eAAe,SAASU,IAAMzB,EAAEwB,Y,mCAK5CxB,GACT,IAAIkC,EAAOlC,EAAEmC,OAAOC,MAAM,GAE1B,GAAIF,EAAM,CACN,IAAMG,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,SAAUvC,GACtB,IAAIwC,EAASxC,EAAEmC,OAAOM,OACtB3B,SAASC,eAAe,SAASU,IAAMe,GAG3CH,EAAOK,cAAcR,M,iCAIjB,IAAD,OACP9B,KAAKuC,SAAS,CACVxC,KAAMC,KAAKF,MAAMC,KAAO,KACzB,WACCW,SAASC,eAAe,kBAAkBR,MAAMJ,KAAO,EAAKD,MAAMC,KAAO,S,kCAIpE,IAAD,OACRC,KAAKuC,SAAS,CACVxC,KAAMC,KAAKF,MAAMC,KAAO,KACzB,WACCW,SAASC,eAAe,kBAAkBR,MAAMJ,KAAO,EAAKD,MAAMC,KAAO,S,+BAIvE,IAAD,OACL,OAAO,yBAAKyC,UAAU,iBAAiBC,IAAI,aACvC,2BAAOC,KAAK,OAAOC,SAAU,SAAA/C,GAAC,OAAI,EAAKgD,aAAahD,IAAIuB,GAAG,OAAOqB,UAAU,sBAC5E,yBAAKrC,MAAO,CAAE0C,KAAM,KACpB,4BAAQL,UAAU,aAAaM,QAAS,kBAAM,EAAKC,aAAnD,eACA,4BAAQP,UAAU,aAAaM,QAAS,kBAAM,EAAKE,cAAnD,gBACA,4BAAQR,UAAU,aAAaM,QAAS,kBAAM,EAAKG,WAAnD,YACA,4BAAQT,UAAU,aAAaM,QAAS,kBAAM,EAAKI,YAAnD,W,GA9GMC,IAAMC,WAmHxBC,IAASC,OAAO,kBAACzD,EAAD,MAASa,SAASC,eAAe,a","file":"static/js/main.24d96a34.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { isArray } from 'util';\n\nconst URL = window.apiURL || 'http://127.0.0.1:33003';\n\nconst getUrlParam = () => {\n    let searchParams = window.location.search;\n    let p = searchParams.split('?');\n    let params = {};\n    p.map(e => {\n        if (e) {\n            params[e.split('=')[0]] = e.split('=')[1];\n        }\n    })\n\n    return params;\n}\n\nclass App extends React.Component {\n    state = {\n        zoom: 100\n    }\n\n    onPrint() {\n        this.refs.container.style.opacity = '0';\n        window.print();\n        this.refs.container.style.opacity = '1';\n    }\n\n    onSave() {\n        const searchParams = getUrlParam();\n\n        let data = {};\n        if (window.payload && isArray(window.payload)) {\n            window.payload.map(e => {\n                data[e] = document.getElementById(e).value\n            })\n        }\n\n        fetch(URL + '/api/document/save', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json; charset=utf-8'\n            },\n            body: JSON.stringify({\n                id: searchParams.id,\n                data: JSON.stringify(data),\n                photo: document.getElementById(\"image\").src || \"\"\n            })\n        })\n            .then(e => e.json())\n            .then(e => {\n                if (e.ok === 1) {\n                    alert(\"Lưu thành công\");\n                }\n                else {\n                    alert(\"Lưu thất bại, vui lòng thử lại\");\n                }\n            })\n    }\n\n    componentDidMount() {\n        const searchParams = getUrlParam();\n\n        fetch(URL + '/api/document/get', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json; charset=utf-8'\n            },\n            body: JSON.stringify({\n                id: searchParams.id\n            })\n        })\n            .then(e => e.json())\n            .then(e => {\n                let data = e.data;\n                if (data) {\n                    Object.keys(data).map(key => {\n                        try {\n                            document.getElementById(key).value = data[key];\n                        } catch (err) { }\n                    })\n                }\n\n                if (e.photo) {\n                    document.getElementById(\"image\").src = e.photo;\n                }\n            })\n    }\n\n    onfileChange(e) {\n        let file = e.target.files[0]\n\n        if (file) {\n            const reader = new FileReader();\n\n            reader.onload = function (e) {\n                let base64 = e.target.result;\n                document.getElementById(\"image\").src = base64;\n            }\n\n            reader.readAsDataURL(file);\n        }\n    }\n\n    onZoomIn() {\n        this.setState({\n            zoom: this.state.zoom + 20\n        }, () => {\n            document.getElementById(\"page-container\").style.zoom = this.state.zoom + '%';\n        })\n    }\n\n    onZoomOut() {\n        this.setState({\n            zoom: this.state.zoom - 20\n        }, () => {\n            document.getElementById(\"page-container\").style.zoom = this.state.zoom + '%';\n        })\n    }\n\n    render() {\n        return <div className='xxx__container' ref='container'>\n            <input type='file' onChange={e => this.onfileChange(e)} id=\"file\" className='custom-file-input' />\n            <div style={{ flex: 1 }}></div>\n            <button className='xxx-button' onClick={() => this.onZoomIn()}>Phóng to</button>\n            <button className='xxx-button' onClick={() => this.onZoomOut()}>Thu nhỏ</button>\n            <button className='xxx-button' onClick={() => this.onSave()}>Lưu</button>\n            <button className='xxx-button' onClick={() => this.onPrint()}>In</button>\n        </div>\n    }\n}\n\nReactDOM.render(<App />, document.getElementById('fucking'));"],"sourceRoot":""}