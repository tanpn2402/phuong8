(this.webpackJsonpscript=this.webpackJsonpscript||[]).push([[0],{54:function(e,t,n){e.exports=n(70)},59:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n(12),i=n(29),r=n(30),c=n(35),l=n(0),u=n.n(l),s=n(9),m=n.n(s),d=(n(59),n(41)),f=n(98),p=n(89),h=n(99),g=n(97),y=n(93),v=n(94),E=n(5),b=n(71),k=n(95),I=n(48),C=n.n(I),w=n(47),O=n.n(w),j=n(45),x=n.n(j),S=n(46),N=n.n(S),R=n(96),B=(n(63),window.apiURL||"http://127.0.0.1:33003");var L=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).state={open:!1,data:[],loading:!0},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.open!==this.state.open&&(this.fetchData(e.data),this.setState({open:e.open,data:[]}))}},{key:"fetchData",value:function(e){var t=this,n=e.fileid;this.setState({loading:!0}),fetch(B+"/api/identity/get",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({fileid:n})}).then((function(e){return e.json()})).then((function(e){t.setState({loading:!1}),e.ok&&t.setState({data:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,a=t.loading,o=t.data,i=t.idOpenLoading,r=this.props.classes;return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{open:n,onClose:function(){return e.setState({open:!1})},classes:{paper:r.dialogPaper}},u.a.createElement(y.a,null,"CMND"),u.a.createElement(v.a,null,a&&u.a.createElement(b.a,{component:"small"},"\u0110ang t\u1ea3i..."),!a&&o&&0===o.length&&u.a.createElement(b.a,{component:"small"},"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u"),u.a.createElement(k.a,{container:!0,justify:"center"},u.a.createElement(k.a,{item:!0},o&&o.map((function(t){return u.a.createElement(p.a,{className:r.imageContainer,key:t.id},u.a.createElement("div",{className:r.clearImage},u.a.createElement(h.a,{title:"Xoay tr\xe1i"},u.a.createElement(R.a,{onClick:function(){return e.onRotateImage(t,-1)}},u.a.createElement(x.a,null))),u.a.createElement(h.a,{title:"Xoay ph\u1ea3i"},u.a.createElement(R.a,{onClick:function(){return e.onRotateImage(t,1)}},u.a.createElement(N.a,null))),u.a.createElement(h.a,{title:"T\u1ea3i xu\u1ed1ng"},u.a.createElement(R.a,{onClick:function(){return e.onDownloadImage(t)}},u.a.createElement(O.a,null))),u.a.createElement(h.a,{title:"X\xf3a"},u.a.createElement(R.a,{onClick:function(){return e.onRemoveImage(t)}},u.a.createElement(C.a,null)))),u.a.createElement("img",{src:t.value,alt:"adsa",className:r.image,id:"imag-"+t.id,onClick:function(){return e.openImage(t)}}))})))),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(k.a,{container:!0,alignItems:"center",justify:"center"},u.a.createElement(k.a,{item:!0},u.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){return e.onChooseFile()}},"Th\xeam m\u1edbi"),u.a.createElement("input",{key:(new Date).getTime(),type:"file",id:"getFile",onChange:function(t){return e.onfileChange(t)},style:{display:"none"}}))))),u.a.createElement(f.a,{open:i},u.a.createElement(v.a,null,u.a.createElement(b.a,{component:"small"},"\u0110ang upload..."))))}},{key:"onRotateImage",value:function(e,t){var n=document.getElementById("imag-"+e.id).style.transform;""===(n=(n=n.replace("rotate(","")).replace("deg)",""))&&(n=0),n=parseInt(n)+90*t,document.getElementById("imag-"+e.id).style.transform="rotate(".concat(n,"deg)")}},{key:"openImage",value:function(e){}},{key:"onDownloadImage",value:function(e){var t=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),o=new Uint8Array(a),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);return new Blob([a],{type:n})}(e.value),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="",document.body.appendChild(a),a.click(),a.remove()}},{key:"onRemoveImage",value:function(e){var t=this;fetch(B+"/api/identity/delete",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id})}).then((function(e){return e.json()})).then((function(n){if(n.ok){var a=t.state.data.filter((function(t){return t.id!==e.id}));t.setState({data:[].concat(a)})}}))}},{key:"onChooseFile",value:function(){document.getElementById("getFile").click()}},{key:"onfileChange",value:function(e){var t=this.props.data,n=e.target.files[0],a=this;if(n){a.setState({idOpenLoading:!0});var o=new FileReader;o.onload=function(e){var n=e.target.result;fetch(B+"/api/identity/insert",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({fileid:t.fileid,value:n})}).then((function(e){return e.json()})).then((function(e){a.setState({idOpenLoading:!1}),e.ok&&a.setState({data:[].concat(a.state.data).concat({id:e.insertId,value:n})})}))},o.readAsDataURL(n)}}}]),t}(u.a.Component),P=Object(E.a)((function(e){return{dialogPaper:{minWidth:800},image:{width:500,height:360,objectFit:"contain"},imageContainer:{position:"relative",width:600,height:500,marginBottom:10,display:"flex",alignItems:"center",justifyContent:"center"},clearImage:{position:"absolute",top:0,right:0,backgroundColor:"#3f51b5",zIndex:9}}}))(L),z=window.apiURL||"http://127.0.0.1:33003";var D=function(){var e=window.location.search.split("?"),t={};return e.map((function(e){e&&(t[e.split("=")[0]]=e.split("=")[1])})),t},T=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).state={zoom:100,isOpenIdentityList:!1},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"onPrint",value:function(){this.refs.container.style.opacity="0",window.print(),this.refs.container.style.opacity="1"}},{key:"onSave",value:function(){var e=D(),t={};window.payload&&Object(d.isArray)(window.payload)&&window.payload.map((function(e){t[e]=(document.getElementById(e).value||"").replace(new RegExp("\n"),"|N|")}));var n=JSON.stringify(t)+"";fetch(z+"/api/document/save",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id,data:n,photo:(document.getElementById("image")||{}).src||""})}).then((function(e){return e.json()})).then((function(e){1===e.ok?alert("L\u01b0u th\xe0nh c\xf4ng"):alert("L\u01b0u th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i")}))}},{key:"componentDidMount",value:function(){var e=D();fetch(z+"/api/document/get",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id})}).then((function(e){return e.json()})).then((function(e){var t=e.data;t&&Object.keys(t).map((function(e){try{var n=(t[e]||"").replace(new RegExp("\\|N\\|"),"\n");document.getElementById(e).value=n}catch(a){}})),e.photo&&(document.getElementById("image").src=e.photo)}))}},{key:"onfileChange",value:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){var t=e.target.result;document.getElementById("image").src=t},n.readAsDataURL(t)}}},{key:"onZoomIn",value:function(){var e=this;this.setState({zoom:this.state.zoom+20},(function(){document.getElementById("page-container").style.zoom=e.state.zoom+"%"}))}},{key:"onZoomOut",value:function(){var e=this;this.setState({zoom:this.state.zoom-20},(function(){document.getElementById("page-container").style.zoom=e.state.zoom+"%"}))}},{key:"onRemoveImage",value:function(){document.getElementById("image").src=null}},{key:"onViewIdentity",value:function(){this.setState({isOpenIdentityList:!0})}},{key:"render",value:function(){var e=this,t=D();return u.a.createElement("div",{className:"xxx__container",ref:"container"},u.a.createElement("input",{type:"file",onChange:function(t){return e.onfileChange(t)},id:"file",className:"custom-file-input"}),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onRemoveImage()}},"X\xf3a \u1ea3nh"),u.a.createElement("div",{style:{flex:1}}),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onViewIdentity()}},"Xem CMND"),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onZoomIn()}},"Ph\xf3ng to"),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onZoomOut()}},"Thu nh\u1ecf"),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onSave()}},"L\u01b0u"),u.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onPrint()}},"In"),u.a.createElement(P,{open:this.state.isOpenIdentityList,data:{fileid:t.id}}))}}]),t}(u.a.Component);m.a.render(u.a.createElement(T,null),document.getElementById("fucking"))}},[[54,1,2]]]);
//# sourceMappingURL=main.b6a1fd0a.chunk.js.map