(this.webpackJsonpscript=this.webpackJsonpscript||[]).push([[0],{41:function(e,t,n){e.exports=n(56)},46:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(20),i=n(12),o=n(23),c=n(24),r=n(28),l=n(0),s=n.n(l),u=n(8),m=n.n(u),d=(n(46),n(32)),f=n(82),p=n(74),h=n(81),g=n(77),y=n(78),v=n(4),E=n(58),b=n(79),k=n(35),O=n.n(k),C=n(80),w=window.apiURL||"http://127.0.0.1:33003",I=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={open:!1,data:[],loading:!0},n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.open!==this.state.open&&(this.fetchData(e.data),this.setState({open:e.open,data:[]}))}},{key:"fetchData",value:function(e){var t=this,n=e.fileid;this.setState({loading:!0}),fetch(w+"/api/identity/get",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({fileid:n})}).then((function(e){return e.json()})).then((function(e){t.setState({loading:!1}),e.ok&&t.setState({data:e.data})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,a=t.loading,i=t.data,o=t.idOpenLoading,c=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.a,{open:n,onClose:function(){return e.setState({open:!1})},classes:{paper:c.dialogPaper}},s.a.createElement(g.a,null,"CMND"),s.a.createElement(y.a,null,a&&s.a.createElement(E.a,{component:"small"},"\u0110ang t\u1ea3i..."),!a&&i&&0===i.length&&s.a.createElement(E.a,{component:"small"},"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u"),s.a.createElement(b.a,{container:!0,justify:"center"},s.a.createElement(b.a,{item:!0},i&&i.map((function(t){return s.a.createElement(p.a,{className:c.imageContainer},s.a.createElement("div",{className:c.clearImage},s.a.createElement(C.a,{onClick:function(){return e.onRemoveImage(t)}},s.a.createElement(O.a,null))),s.a.createElement("img",{src:t.value,alt:"adsa",className:c.image}))})))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(b.a,{container:!0,alignItems:"center",justify:"center"},s.a.createElement(b.a,{item:!0},s.a.createElement(h.a,{color:"primary",variant:"contained",onClick:function(){return e.onChooseFile()}},"Th\xeam m\u1edbi"),s.a.createElement("input",{key:(new Date).getTime(),type:"file",id:"getFile",onChange:function(t){return e.onfileChange(t)},style:{display:"none"}}))))),s.a.createElement(f.a,{open:o},s.a.createElement(y.a,null,s.a.createElement(E.a,{component:"small"},"\u0110ang t\u1ea3i..."))))}},{key:"onRemoveImage",value:function(e){var t=this;fetch(w+"/api/identity/delete",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id})}).then((function(e){return e.json()})).then((function(n){if(n.ok){var a=t.state.data.filter((function(t){return t.id!==e.id}));t.setState({data:[].concat(a)})}}))}},{key:"onChooseFile",value:function(){document.getElementById("getFile").click()}},{key:"onfileChange",value:function(e){var t=this.props.data,n=e.target.files[0],a=this;if(n){a.setState({idOpenLoading:!0});var i=new FileReader;i.onload=function(e){var n=e.target.result;fetch(w+"/api/identity/insert",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({fileid:t.fileid,value:n})}).then((function(e){return e.json()})).then((function(e){a.setState({idOpenLoading:!1}),e.ok&&a.setState({data:[].concat(a.state.data).concat({id:e.insertId,value:n})})}))},i.readAsDataURL(n)}}}]),t}(s.a.Component),j=Object(v.a)((function(e){return{dialogPaper:{minWidth:800},image:{width:"100%"},imageContainer:{position:"relative",width:600,marginBottom:10},clearImage:{position:"absolute",top:0,right:0,backgroundColor:"#3f51b5"}}}))(I),x=window.apiURL||"http://127.0.0.1:33003";var S=function(){var e=window.location.search.split("?"),t={};return e.map((function(e){e&&(t[e.split("=")[0]]=e.split("=")[1])})),t},N=function(e){function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(n=Object(o.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={zoom:100,isOpenIdentityList:!1},n}return Object(r.a)(t,e),Object(i.a)(t,[{key:"onPrint",value:function(){this.refs.container.style.opacity="0",window.print(),this.refs.container.style.opacity="1"}},{key:"onSave",value:function(){var e=S(),t={};window.payload&&Object(d.isArray)(window.payload)&&window.payload.map((function(e){t[e]=(document.getElementById(e).value||"").replace(new RegExp("\n"),"|N|")}));var n=JSON.stringify(t)+"";fetch(x+"/api/document/save",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id,data:n,photo:document.getElementById("image")||{}.src||""})}).then((function(e){return e.json()})).then((function(e){1===e.ok?alert("L\u01b0u th\xe0nh c\xf4ng"):alert("L\u01b0u th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i")}))}},{key:"componentDidMount",value:function(){var e=S();fetch(x+"/api/document/get",{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:e.id})}).then((function(e){return e.json()})).then((function(e){var t=e.data;t&&Object.keys(t).map((function(e){try{var n=(t[e]||"").replace(new RegExp("\\|N\\|"),"\n");document.getElementById(e).value=n}catch(a){}})),e.photo&&(document.getElementById("image").src=e.photo)}))}},{key:"onfileChange",value:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){var t=e.target.result;document.getElementById("image").src=t},n.readAsDataURL(t)}}},{key:"onZoomIn",value:function(){var e=this;this.setState({zoom:this.state.zoom+20},(function(){document.getElementById("page-container").style.zoom=e.state.zoom+"%"}))}},{key:"onZoomOut",value:function(){var e=this;this.setState({zoom:this.state.zoom-20},(function(){document.getElementById("page-container").style.zoom=e.state.zoom+"%"}))}},{key:"onRemoveImage",value:function(){document.getElementById("image").src=null}},{key:"onViewIdentity",value:function(){this.setState({isOpenIdentityList:!0})}},{key:"render",value:function(){var e=this,t=S();return s.a.createElement("div",{className:"xxx__container",ref:"container"},s.a.createElement("input",{type:"file",onChange:function(t){return e.onfileChange(t)},id:"file",className:"custom-file-input"}),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onRemoveImage()}},"X\xf3a \u1ea3nh"),s.a.createElement("div",{style:{flex:1}}),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onViewIdentity()}},"Xem CMND"),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onZoomIn()}},"Ph\xf3ng to"),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onZoomOut()}},"Thu nh\u1ecf"),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onSave()}},"L\u01b0u"),s.a.createElement("button",{className:"xxx-button",onClick:function(){return e.onPrint()}},"In"),s.a.createElement(j,{open:this.state.isOpenIdentityList,data:{fileid:t.id}}))}}]),t}(s.a.Component);m.a.render(s.a.createElement(N,null),document.getElementById("fucking"))}},[[41,1,2]]]);
//# sourceMappingURL=main.33964f4a.chunk.js.map