{"version":3,"sources":["index.js"],"names":["URL","window","apiURL","getUrlParam","p","location","search","split","params","map","e","App","state","zoom","this","refs","container","style","opacity","print","searchParams","data","payload","isArray","document","getElementById","value","replace","RegExp","str","JSON","stringify","fetch","method","headers","body","id","photo","src","then","json","ok","alert","Object","keys","key","d","err","file","target","files","reader","FileReader","onload","base64","result","readAsDataURL","setState","className","ref","type","onChange","onfileChange","onClick","onRemoveImage","flex","onZoomIn","onZoomOut","onSave","onPrint","React","Component","ReactDOM","render"],"mappings":"8LAKMA,EAAMC,OAAOC,QAAU,yBAO7B,IAAMC,EAAc,WAChB,IACIC,EADeH,OAAOI,SAASC,OACdC,MAAM,KACvBC,EAAS,GAOb,OANAJ,EAAEK,KAAI,SAAAC,GACEA,IACAF,EAAOE,EAAEH,MAAM,KAAK,IAAMG,EAAEH,MAAM,KAAK,OAIxCC,GAGLG,E,2MACFC,MAAQ,CACJC,KAAM,K,yEAINC,KAAKC,KAAKC,UAAUC,MAAMC,QAAU,IACpCjB,OAAOkB,QACPL,KAAKC,KAAKC,UAAUC,MAAMC,QAAU,M,+BAIpC,IAAME,EAAejB,IAEjBkB,EAAO,GACPpB,OAAOqB,SAAWC,kBAAQtB,OAAOqB,UACjCrB,OAAOqB,QAAQb,KAAI,SAAAC,GACfW,EAAKX,IAAMc,SAASC,eAAef,GAAGgB,OAAS,IAAIC,QAAQ,IAAIC,OAAO,MAAO,UAIrF,IAAIC,EAAMC,KAAKC,UAAUV,GAAQ,GAEjCW,MAAMhC,EAAM,qBAAsB,CAC9BiC,OAAQ,OACRC,QAAS,CACL,eAAgB,mCAEpBC,KAAML,KAAKC,UAAU,CACjBK,GAAIhB,EAAagB,GACjBf,KAAMQ,EACNQ,MAAQb,SAASC,eAAe,UAAY,GAAGa,KAAQ,OAG1DC,MAAK,SAAA7B,GAAC,OAAIA,EAAE8B,UACZD,MAAK,SAAA7B,GACW,IAATA,EAAE+B,GACFC,MAAM,6BAGNA,MAAM,mE,0CAMlB,IAAMtB,EAAejB,IAErB6B,MAAMhC,EAAM,oBAAqB,CAC7BiC,OAAQ,OACRC,QAAS,CACL,eAAgB,mCAEpBC,KAAML,KAAKC,UAAU,CACjBK,GAAIhB,EAAagB,OAGpBG,MAAK,SAAA7B,GAAC,OAAIA,EAAE8B,UACZD,MAAK,SAAA7B,GACF,IAAIW,EAAOX,EAAEW,KACTA,GACAsB,OAAOC,KAAKvB,GAAMZ,KAAI,SAAAoC,GAClB,IACI,IAAIC,GAAKzB,EAAKwB,IAAQ,IAAIlB,QAAQ,IAAIC,OAAO,WAAY,MACzDJ,SAASC,eAAeoB,GAAKnB,MAAQoB,EACvC,MAAOC,QAIbrC,EAAE2B,QACFb,SAASC,eAAe,SAASa,IAAM5B,EAAE2B,Y,mCAK5C3B,GACT,IAAIsC,EAAOtC,EAAEuC,OAAOC,MAAM,GAE1B,GAAIF,EAAM,CACN,IAAMG,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,SAAU3C,GACtB,IAAI4C,EAAS5C,EAAEuC,OAAOM,OACtB/B,SAASC,eAAe,SAASa,IAAMgB,GAG3CH,EAAOK,cAAcR,M,iCAIjB,IAAD,OACPlC,KAAK2C,SAAS,CACV5C,KAAMC,KAAKF,MAAMC,KAAO,KACzB,WACCW,SAASC,eAAe,kBAAkBR,MAAMJ,KAAO,EAAKD,MAAMC,KAAO,S,kCAIpE,IAAD,OACRC,KAAK2C,SAAS,CACV5C,KAAMC,KAAKF,MAAMC,KAAO,KACzB,WACCW,SAASC,eAAe,kBAAkBR,MAAMJ,KAAO,EAAKD,MAAMC,KAAO,S,sCAK7EW,SAASC,eAAe,SAASa,IAAM,O,+BAGjC,IAAD,OACL,OAAO,yBAAKoB,UAAU,iBAAiBC,IAAI,aACvC,2BAAOC,KAAK,OAAOC,SAAU,SAAAnD,GAAC,OAAI,EAAKoD,aAAapD,IAAI0B,GAAG,OAAOsB,UAAU,sBAC5E,4BAAQA,UAAU,aAAaK,QAAS,kBAAM,EAAKC,kBAAnD,mBACA,yBAAK/C,MAAO,CAAEgD,KAAM,KAGpB,4BAAQP,UAAU,aAAaK,QAAS,kBAAM,EAAKG,aAAnD,eACA,4BAAQR,UAAU,aAAaK,QAAS,kBAAM,EAAKI,cAAnD,gBACA,4BAAQT,UAAU,aAAaK,QAAS,kBAAM,EAAKK,WAAnD,YACA,4BAAQV,UAAU,aAAaK,QAAS,kBAAM,EAAKM,YAAnD,W,GAxHMC,IAAMC,WA6HxBC,IAASC,OAAO,kBAAC9D,EAAD,MAASa,SAASC,eAAe,a","file":"static/js/main.46a036ee.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { isArray } from 'util';\n\nconst URL = window.apiURL || 'http://127.0.0.1:33003';\n\nfunction replaceAll(src, search, replacement) {\n    var target = src;\n    return target.replace(new RegExp(search, 'g'), replacement);\n};\n\nconst getUrlParam = () => {\n    let searchParams = window.location.search;\n    let p = searchParams.split('?');\n    let params = {};\n    p.map(e => {\n        if (e) {\n            params[e.split('=')[0]] = e.split('=')[1];\n        }\n    })\n\n    return params;\n}\n\nclass App extends React.Component {\n    state = {\n        zoom: 100\n    }\n\n    onPrint() {\n        this.refs.container.style.opacity = '0';\n        window.print();\n        this.refs.container.style.opacity = '1';\n    }\n\n    onSave() {\n        const searchParams = getUrlParam();\n\n        let data = {};\n        if (window.payload && isArray(window.payload)) {\n            window.payload.map(e => {\n                data[e] = (document.getElementById(e).value || '').replace(new RegExp('\\n'), '|N|')\n            })\n        }\n\n        let str = JSON.stringify(data) + \"\";\n\n        fetch(URL + '/api/document/save', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json; charset=utf-8'\n            },\n            body: JSON.stringify({\n                id: searchParams.id,\n                data: str,\n                photo: (document.getElementById(\"image\") || {}.src) || \"\"\n            })\n        })\n            .then(e => e.json())\n            .then(e => {\n                if (e.ok === 1) {\n                    alert(\"Lưu thành công\");\n                }\n                else {\n                    alert(\"Lưu thất bại, vui lòng thử lại\");\n                }\n            })\n    }\n\n    componentDidMount() {\n        const searchParams = getUrlParam();\n\n        fetch(URL + '/api/document/get', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json; charset=utf-8'\n            },\n            body: JSON.stringify({\n                id: searchParams.id\n            })\n        })\n            .then(e => e.json())\n            .then(e => {\n                let data = e.data;\n                if (data) {\n                    Object.keys(data).map(key => {\n                        try {\n                            let d = (data[key] || '').replace(new RegExp('\\\\|N\\\\|'), '\\n');\n                            document.getElementById(key).value = d\n                        } catch (err) { }\n                    })\n                }\n\n                if (e.photo) {\n                    document.getElementById(\"image\").src = e.photo;\n                }\n            })\n    }\n\n    onfileChange(e) {\n        let file = e.target.files[0]\n\n        if (file) {\n            const reader = new FileReader();\n\n            reader.onload = function (e) {\n                let base64 = e.target.result;\n                document.getElementById(\"image\").src = base64;\n            }\n\n            reader.readAsDataURL(file);\n        }\n    }\n\n    onZoomIn() {\n        this.setState({\n            zoom: this.state.zoom + 20\n        }, () => {\n            document.getElementById(\"page-container\").style.zoom = this.state.zoom + '%';\n        })\n    }\n\n    onZoomOut() {\n        this.setState({\n            zoom: this.state.zoom - 20\n        }, () => {\n            document.getElementById(\"page-container\").style.zoom = this.state.zoom + '%';\n        })\n    }\n\n    onRemoveImage() {\n        document.getElementById(\"image\").src = null;\n    }\n\n    render() {\n        return <div className='xxx__container' ref='container'>\n            <input type='file' onChange={e => this.onfileChange(e)} id=\"file\" className='custom-file-input' />\n            <button className='xxx-button' onClick={() => this.onRemoveImage()}>Xóa ảnh</button>\n            <div style={{ flex: 1 }}>\n\n            </div>\n            <button className='xxx-button' onClick={() => this.onZoomIn()}>Phóng to</button>\n            <button className='xxx-button' onClick={() => this.onZoomOut()}>Thu nhỏ</button>\n            <button className='xxx-button' onClick={() => this.onSave()}>Lưu</button>\n            <button className='xxx-button' onClick={() => this.onPrint()}>In</button>\n        </div>\n    }\n}\n\nReactDOM.render(<App />, document.getElementById('fucking'));"],"sourceRoot":""}